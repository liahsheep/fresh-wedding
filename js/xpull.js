!function(t,i,n,e){function o(i,n){this.element=i,this.options=t.extend({},r,n),this._defaults=r,this._name=s,this.init()}var s="xpull",r={paused:!1,pullThreshold:50,maxPullThreshold:50,spinnerTimeout:2e3,scrollingDom:null,onPullStart:function(){},onPullEnd:function(){},callback:function(){}};o.prototype={init:function(){var i=this,e=t(i.element).children();i.elm=e,e.parent().find(".pull-indicator").remove(),e.parent().prepend('<div class="pull-indicator"><div class="arrow-body"></div><div class="triangle-down"></div><div class="pull-spinner"></div></div>'),i.indicator=e.parent().find(".pull-indicator:eq(0)"),i.spinner=e.parent().find(".pull-spinner:eq(0)"),i.arrow=e.parent().find(".arrow-body:eq(0),.triangle-down:eq(0)"),i.indicatorHeight=i.indicator.outerHeight(),t(e).css({"-webkit-transform":"translate3d(0px, -"+i.indicatorHeight+"px, 0px)"}),e.parent().css({"-webkit-overflow-scrolling":"touch"});var o=e.parent().offset().top,r=0,a=0,d=!1;i.elast=!0,i.arrow.css("visibility","hidden"),i.indicatorHidden=!0,e.unbind("touchstart."+s),e.on("touchstart."+s,function(t){return i.options.paused?!1:(i.options.onPullStart.call(this),void(r=t.originalEvent.touches[0].pageY-o))}),e.unbind("touchmove."+s),e.on("touchmove."+s,function(l){return i.options.paused?!1:e.position().top<0||(i.options.scrollingDom||e.parent()).scrollTop()>0||n.body.scrollTop>0?!0:(i.indicatorHidden&&(i.arrow.css("visibility","visible"),i.indicatorHidden=!1),a=l.originalEvent.touches[0].pageY-o-r,a>1?(i.elast&&(t(n.body).on("touchmove."+s,function(t){t.preventDefault()}),i.elast=!1),a<=parseInt(i.options.pullThreshold)+i.options.maxPullThreshold&&(t(e).css({"-webkit-transform":"translate3d(0px, "+(a-i.indicatorHeight)+"px, 0px)"}),i.indicator.css({top:a-i.indicatorHeight+"px"})),a>i.options.pullThreshold&&!d?i.indicator.addClass("arrow-rotate-180"):a<=i.options.pullThreshold&&d&&i.indicator.removeClass("arrow-rotate-180")):(t(n.body).unbind("touchmove."+s),i.elast=!0),void(d=i.indicator.hasClass("arrow-rotate-180")))}),e.unbind("touchend."+s),e.on("touchend."+s,function(o){return i.options.paused?!1:(i.options.onPullEnd.call(this),a>0&&(a>i.options.pullThreshold?(i.options.callback.call(this),i.arrow.hide(),i.spinner.show(),e.css({"-webkit-transform":"translate3d(0px, 0px, 0px)","-webkit-transition":"-webkit-transform 300ms ease"}),i.indicator.css({top:"0px","-webkit-transition":"top 300ms ease"}),i.options.spinnerTimeout&&setTimeout(function(){i.reset()},i.options.spinnerTimeout)):(i.indicator.css({top:"-"+i.indicatorHeight+"px","-webkit-transition":"top 300ms ease"}),e.css({"-webkit-transform":"translate3d(0px, -"+i.indicatorHeight+"px, 0px)","-webkit-transition":"-webkit-transform 300ms ease"})),a=0),i.indicatorHidden||(i.arrow.css("visibility","hidden"),i.indicatorHidden=!0),void setTimeout(function(){e.css({"-webkit-transition":""}),i.indicator.css({"-webkit-transition":""}),t(n.body).unbind("touchmove."+s),i.elast=!0},300))})},reset:function(){var i=this,e=i.elm;i.indicator.css({top:"-"+i.indicatorHeight+"px","-webkit-transition":"top 300ms ease"}),e.css({"-webkit-transform":"translate3d(0px, -"+i.indicatorHeight+"px, 0px)","-webkit-transition":"-webkit-transform 300ms ease"}),setTimeout(function(){i.arrow.show(),i.spinner.hide(),i.indicator.removeClass("arrow-rotate-180"),e.css({"-webkit-transition":""}),i.indicator.css({"-webkit-transition":""}),t(n.body).unbind("touchmove."+s),i.elast=!0},300)},insertCss:function(t,i){var e=n.getElementById(i);e&&e.parentNode.removeChild(e);var o=n.createElement("style");if(o.type="text/css",o.id=i,o.styleSheet)n.getElementsByTagName("head")[0].appendChild(o),o.styleSheet.cssText=t;else{var s=n.createTextNode(t);o.appendChild(s),n.getElementsByTagName("head")[0].appendChild(o)}}},t.fn[s]=function(i){return this.each(function(){t.data(this,"plugin_"+s)||t.data(this,"plugin_"+s,new o(this,i))})}}(jQuery,window,document);